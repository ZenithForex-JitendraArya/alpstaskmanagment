{"ast":null,"code":"import{Card,Row,Col,Spinner}from'react-bootstrap';import{useContext,useEffect,useState}from'react';import api from'../services/api';import AuthContext from'../context/AuthContext';import{FaUsers,FaProjectDiagram,FaTicketAlt}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _stats$recentActivity;const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const{user}=useContext(AuthContext);useEffect(()=>{const fetchStats=async()=>{try{const{data}=await api.get('/dashboard/stats');setStats(data);}catch(err){console.error(err);}finally{setLoading(false);}};fetchStats();},[]);if(loading)return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"d-block mx-auto\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mb-4\",children:[\"Welcome back, \",user===null||user===void 0?void 0:user.username,\"!\"]}),/*#__PURE__*/_jsxs(Row,{className:\"g-4 mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(FaUsers,{size:40,className:\"text-primary mb-3\"}),/*#__PURE__*/_jsx(\"h3\",{children:(stats===null||stats===void 0?void 0:stats.clients)||0}),/*#__PURE__*/_jsx(Card.Text,{children:\"Total Clients\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(FaProjectDiagram,{size:40,className:\"text-success mb-3\"}),/*#__PURE__*/_jsx(\"h3\",{children:(stats===null||stats===void 0?void 0:stats.projects)||0}),/*#__PURE__*/_jsx(Card.Text,{children:\"Active Projects\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(FaTicketAlt,{size:40,className:\"text-warning mb-3\"}),/*#__PURE__*/_jsx(\"h3\",{children:(stats===null||stats===void 0?void 0:stats.tickets)||0}),/*#__PURE__*/_jsx(Card.Text,{children:\"Open Tickets\"})]})})})]}),/*#__PURE__*/_jsxs(Card,{className:\"shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Recent Activity\"})}),/*#__PURE__*/_jsx(Card.Body,{children:(stats===null||stats===void 0?void 0:(_stats$recentActivity=stats.recentActivity)===null||_stats$recentActivity===void 0?void 0:_stats$recentActivity.length)>0?/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:stats.recentActivity.map((activity,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"mb-3 pb-2 border-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:activity.message}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(activity.timestamp).toLocaleString()})]})},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No recent activity\"})})]})]});};export default Dashboard;","map":{"version":3,"names":["Card","Row","Col","Spinner","useContext","useEffect","useState","api","AuthContext","FaUsers","FaProjectDiagram","FaTicketAlt","jsx","_jsx","jsxs","_jsxs","Dashboard","_stats$recentActivity","stats","setStats","loading","setLoading","user","fetchStats","data","get","err","console","error","animation","className","children","username","md","Body","size","clients","Text","projects","tickets","Header","recentActivity","length","map","activity","index","message","Date","timestamp","toLocaleString"],"sources":["D:/freelance1/alps-crm/frontend/src/pages/Dashboard.js"],"sourcesContent":["import { Card, Row, Col, Spinner } from 'react-bootstrap';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport api from '../services/api';\r\nimport AuthContext from '../context/AuthContext';\r\nimport { FaUsers, FaProjectDiagram, FaTicketAlt } from 'react-icons/fa';\r\n\r\nconst Dashboard = () => {\r\n    const [stats, setStats] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const { user } = useContext(AuthContext);\r\n\r\n    useEffect(() => {\r\n        const fetchStats = async () => {\r\n            try {\r\n                const { data } = await api.get('/dashboard/stats');\r\n                setStats(data);\r\n            } catch (err) {\r\n                console.error(err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    if (loading) return <Spinner animation=\"border\" className=\"d-block mx-auto\" />;\r\n\r\n    return (\r\n        <div>\r\n            <h2 className=\"mb-4\">Welcome back, {user?.username}!</h2>\r\n\r\n            <Row className=\"g-4 mb-4\">\r\n                <Col md={4}>\r\n                    <Card className=\"h-100 shadow-sm\">\r\n                        <Card.Body className=\"text-center\">\r\n                            <FaUsers size={40} className=\"text-primary mb-3\" />\r\n                            <h3>{stats?.clients || 0}</h3>\r\n                            <Card.Text>Total Clients</Card.Text>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n\r\n                <Col md={4}>\r\n                    <Card className=\"h-100 shadow-sm\">\r\n                        <Card.Body className=\"text-center\">\r\n                            <FaProjectDiagram size={40} className=\"text-success mb-3\" />\r\n                            <h3>{stats?.projects || 0}</h3>\r\n                            <Card.Text>Active Projects</Card.Text>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n\r\n                <Col md={4}>\r\n                    <Card className=\"h-100 shadow-sm\">\r\n                        <Card.Body className=\"text-center\">\r\n                            <FaTicketAlt size={40} className=\"text-warning mb-3\" />\r\n                            <h3>{stats?.tickets || 0}</h3>\r\n                            <Card.Text>Open Tickets</Card.Text>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Recent Activity Section */}\r\n            <Card className=\"shadow-sm\">\r\n                <Card.Header>\r\n                    <h5 className=\"mb-0\">Recent Activity</h5>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                    {stats?.recentActivity?.length > 0 ? (\r\n                        <ul className=\"list-unstyled\">\r\n                            {stats.recentActivity.map((activity, index) => (\r\n                                <li key={index} className=\"mb-3 pb-2 border-bottom\">\r\n                                    <div className=\"d-flex justify-content-between\">\r\n                                        <span>{activity.message}</span>\r\n                                        <small className=\"text-muted\">{new Date(activity.timestamp).toLocaleString()}</small>\r\n                                    </div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        <p className=\"text-muted\">No recent activity</p>\r\n                    )}\r\n                </Card.Body>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}