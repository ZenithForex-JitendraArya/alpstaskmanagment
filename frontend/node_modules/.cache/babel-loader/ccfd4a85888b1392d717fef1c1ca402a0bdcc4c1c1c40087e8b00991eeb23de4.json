{"ast":null,"code":"import{Table,Button,Spinner,Alert,Badge,Form,Modal}from'react-bootstrap';import{useState,useEffect}from'react';import api from'../services/api';import{FaEdit,FaTrash,FaPlus,FaSearch}from'react-icons/fa';import ClientForm from'../components/clients/ClientForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Clients=()=>{const[clients,setClients]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showModal,setShowModal]=useState(false);const[selectedClient,setSelectedClient]=useState(null);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{fetchClients();},[]);const fetchClients=async()=>{try{const{data}=await api.get('/clients');setClients(data);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to fetch clients');}finally{setLoading(false);}};const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this client?')){try{await api.delete(\"/clients/\".concat(id));fetchClients();}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to delete client');}}};const filteredClients=clients.filter(client=>client.name.toLowerCase().includes(searchTerm.toLowerCase())||client.email.toLowerCase().includes(searchTerm.toLowerCase()));if(loading)return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"d-block mx-auto\"});if(error)return/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Clients\"}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:()=>{setSelectedClient(null);setShowModal(true);},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-2\"}),\"Add Client\"]})]}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Search clients...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(FaSearch,{className:\"position-absolute top-50 end-0 translate-middle-y me-3 text-muted\"})]})}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredClients.map(client=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:client.name}),/*#__PURE__*/_jsx(\"td\",{children:client.email}),/*#__PURE__*/_jsx(\"td\",{children:client.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:client.status==='active'?'success':'secondary',children:client.status})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",className:\"me-2\",onClick:()=>{setSelectedClient(client);setShowModal(true);},children:/*#__PURE__*/_jsx(FaEdit,{})}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>handleDelete(client.id),children:/*#__PURE__*/_jsx(FaTrash,{})})]})]},client.id))})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:()=>setShowModal(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:selectedClient?'Edit Client':'Add New Client'})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(ClientForm,{client:selectedClient,onSuccess:()=>{setShowModal(false);fetchClients();}})})]})]});};export default Clients;","map":{"version":3,"names":["Table","Button","Spinner","Alert","Badge","Form","Modal","useState","useEffect","api","FaEdit","FaTrash","FaPlus","FaSearch","ClientForm","jsx","_jsx","jsxs","_jsxs","Clients","clients","setClients","loading","setLoading","error","setError","showModal","setShowModal","selectedClient","setSelectedClient","searchTerm","setSearchTerm","fetchClients","data","get","err","_err$response","_err$response$data","response","message","handleDelete","id","window","confirm","delete","concat","_err$response2","_err$response2$data","filteredClients","filter","client","name","toLowerCase","includes","email","animation","className","variant","children","onClick","Group","Control","type","placeholder","value","onChange","e","target","striped","bordered","hover","responsive","map","phone","bg","status","size","show","onHide","Header","closeButton","Title","Body","onSuccess"],"sources":["D:/freelance1/alps-crm/frontend/src/pages/Clients.js"],"sourcesContent":["import { Table, Button, Spinner, Alert, Badge, Form, Modal } from 'react-bootstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport api from '../services/api';\r\nimport { FaEdit, FaTrash, FaPlus, FaSearch } from 'react-icons/fa';\r\nimport ClientForm from '../components/clients/ClientForm';\r\n\r\nconst Clients = () => {\r\n    const [clients, setClients] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [selectedClient, setSelectedClient] = useState(null);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchClients();\r\n    }, []);\r\n\r\n    const fetchClients = async () => {\r\n        try {\r\n            const { data } = await api.get('/clients');\r\n            setClients(data);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Failed to fetch clients');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm('Are you sure you want to delete this client?')) {\r\n            try {\r\n                await api.delete(`/clients/${id}`);\r\n                fetchClients();\r\n            } catch (err) {\r\n                setError(err.response?.data?.message || 'Failed to delete client');\r\n            }\r\n        }\r\n    };\r\n\r\n    const filteredClients = clients.filter(client =>\r\n        client.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        client.email.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    if (loading) return <Spinner animation=\"border\" className=\"d-block mx-auto\" />;\r\n    if (error) return <Alert variant=\"danger\">{error}</Alert>;\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h2>Clients</h2>\r\n                <Button variant=\"primary\" onClick={() => {\r\n                    setSelectedClient(null);\r\n                    setShowModal(true);\r\n                }}>\r\n                    <FaPlus className=\"me-2\" />\r\n                    Add Client\r\n                </Button>\r\n            </div>\r\n\r\n            <Form.Group className=\"mb-3\">\r\n                <div className=\"position-relative\">\r\n                    <Form.Control\r\n                        type=\"text\"\r\n                        placeholder=\"Search clients...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                    <FaSearch className=\"position-absolute top-50 end-0 translate-middle-y me-3 text-muted\" />\r\n                </div>\r\n            </Form.Group>\r\n\r\n            <Table striped bordered hover responsive>\r\n                <thead className=\"table-dark\">\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Email</th>\r\n                        <th>Phone</th>\r\n                        <th>Status</th>\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {filteredClients.map(client => (\r\n                        <tr key={client.id}>\r\n                            <td>{client.name}</td>\r\n                            <td>{client.email}</td>\r\n                            <td>{client.phone || '-'}</td>\r\n                            <td>\r\n                                <Badge bg={client.status === 'active' ? 'success' : 'secondary'}>\r\n                                    {client.status}\r\n                                </Badge>\r\n                            </td>\r\n                            <td>\r\n                                <Button\r\n                                    variant=\"outline-primary\"\r\n                                    size=\"sm\"\r\n                                    className=\"me-2\"\r\n                                    onClick={() => {\r\n                                        setSelectedClient(client);\r\n                                        setShowModal(true);\r\n                                    }}\r\n                                >\r\n                                    <FaEdit />\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"outline-danger\"\r\n                                    size=\"sm\"\r\n                                    onClick={() => handleDelete(client.id)}\r\n                                >\r\n                                    <FaTrash />\r\n                                </Button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </Table>\r\n\r\n            <Modal show={showModal} onHide={() => setShowModal(false)}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{selectedClient ? 'Edit Client' : 'Add New Client'}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <ClientForm\r\n                        client={selectedClient}\r\n                        onSuccess={() => {\r\n                            setShowModal(false);\r\n                            fetchClients();\r\n                        }}\r\n                    />\r\n                </Modal.Body>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Clients;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}